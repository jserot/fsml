<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Simul (fsml.Fsml.Simul)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">fsml</a> &#x00BB; <a href="../index.html">Fsml</a> &#x00BB; Simul</nav><h1>Module <code>Fsml.Simul</code></h1><nav class="toc"><ul><li><a href="#simulation">Simulation</a><ul><li><a href="#simulation-functions">Simulation functions</a></li></ul></li></ul></nav></header><section><header><h2 id="simulation"><a href="#simulation" class="anchor"></a>Simulation</h2></header><dl><dt class="spec type" id="type-ctx"><a href="#type-ctx" class="anchor"></a><code><span class="keyword">type</span> ctx</code><code> = </code><code>{</code><table class="record"><tr id="type-ctx.state" class="anchored"><td class="def field"><a href="#type-ctx.state" class="anchor"></a><code>state : <a href="../State/index.html#type-t">State.t</a>;</code></td></tr><tr id="type-ctx.env" class="anchored"><td class="def field"><a href="#type-ctx.env" class="anchor"></a><code>env : <a href="../Expr/index.html#type-env">Expr.env</a>;</code></td></tr></table><code>}</code></dt><dd><p>A context is the dynamic view of a FSM. It records its current state and, in <code>env</code>, the value of its inputs, outputs and local variables.</p></dd></dl><dl><dt class="spec value" id="val-pp_ctx"><a href="#val-pp_ctx" class="anchor"></a><code><span class="keyword">val</span> pp_ctx : Ppx_deriving_runtime.Format.formatter <span>&#45;&gt;</span> <a href="index.html#type-ctx">ctx</a> <span>&#45;&gt;</span> Ppx_deriving_runtime.unit</code></dt><dt class="spec value" id="val-show_ctx"><a href="#val-show_ctx" class="anchor"></a><code><span class="keyword">val</span> show_ctx : <a href="index.html#type-ctx">ctx</a> <span>&#45;&gt;</span> Ppx_deriving_runtime.string</code></dt></dl><section><header><h3 id="simulation-functions"><a href="#simulation-functions" class="anchor"></a>Simulation functions</h3></header><dl><dt class="spec value" id="val-step"><a href="#val-step" class="anchor"></a><code><span class="keyword">val</span> step : <a href="index.html#type-ctx">ctx</a> <span>&#45;&gt;</span> <a href="../Fsm/index.html#type-t">Fsm.t</a> <span>&#45;&gt;</span> <span><a href="../Event/index.html#type-t">Event.t</a> list</span> * <a href="index.html#type-ctx">ctx</a></code></dt><dd><p><code>step ctx m</code> performs a single simulation step, within context <code>ctx</code> of FSM <code>m</code>. The first fireable transition is selected according to the current state and value of the inputs and local variables. The actions associated to this transition are executed and both the state and context are updated accordingly. If no fireable transition is found, the context is left unchanged. Returns a list timed output events and the updated context.</p></dd></dl><dl><dt class="spec value" id="val-run"><a href="#val-run" class="anchor"></a><code><span class="keyword">val</span> run : <span>?&#8288;ctx:<a href="index.html#type-ctx">ctx</a></span> <span>&#45;&gt;</span> <span>?&#8288;stop_when:<span><a href="../Guard/index.html#type-t">Guard.t</a> list</span></span> <span>&#45;&gt;</span> <span>?&#8288;stop_after:<a href="../Clock/index.html#type-clk">Clock.clk</a></span> <span>&#45;&gt;</span> <span>?&#8288;trace:bool</span> <span>&#45;&gt;</span> <span>stim:<span><a href="../Tevents/index.html#type-t">Tevents.t</a> list</span></span> <span>&#45;&gt;</span> <a href="../Fsm/index.html#type-t">Fsm.t</a> <span>&#45;&gt;</span> <span><a href="../Tevents/index.html#type-t">Tevents.t</a> list</span> * <span><span><a href="index.html#type-ctx">ctx</a> <a href="../Clock/index.html#type-clocked">Clock.clocked</a></span> list</span></code></dt><dd><p><code>run ctx stim m</code> performs a multi-step simulation of FSM <code>m</code> starting from context <code>ctx</code> and applying a ordered sequence of stimuli listed in <code>stim</code>, producing a sequence of timed event sets and, if the optional argument <code>trace</code> is set, the corresponding sequence of contexts. FSM <code>m</code> is first type-checked. If the initial context <code>ctx</code> is not given it is built by triggering the initial transition of <code>m</code> and gathers its inputs, local variables and outputs. Passing an initial context may be used to start a simulation from a given state obtained from a previous simulation. If a list of guards is given as optional argument <code>stop_when</code>, then simulation stops as soon all of these guards of the these guards becomes true. The guards may include relational operators on the special variable <code>clk</code>, refering to the current simulation step. Ex: <code>-stop_when [%fsm_guard {|rdy=1|}]</code>; If a clock cycle count <code>n</code> is given as optional argument <code>stop_after</code>, then simulation stops after exactly <code>n</code> steps (so that <code>-stop_after n</code> is actually a shorthand for <code>-stop_when &quot;clk=n&quot;</code>).</p></dd></dl></section></section></div></body></html>