<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Fsml__C (fsml.Fsml__C)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">fsml</a> &#x00BB; Fsml__C</nav><h1>Module <code>Fsml__C</code></h1><h2 id="c-backend"><a href="#c-backend" class="anchor"></a>C backend</h2></header><dl><dt class="spec type" id="type-config"><a href="#type-config" class="anchor"></a><code><span class="keyword">type</span> config</code><code> = </code><code>{</code><table class="record"><tr id="type-config.state_var" class="anchored"><td class="def field"><a href="#type-config.state_var" class="anchor"></a><code><span class="keyword">mutable</span> state_var : string;</code></td><td class="doc"><p>Name of variable storing the current state (default: <code>state</code>)</p></td></tr><tr id="type-config.incl_file" class="anchored"><td class="def field"><a href="#type-config.incl_file" class="anchor"></a><code><span class="keyword">mutable</span> incl_file : string;</code></td><td class="doc"><p>Name of the support include file (default: <code>fsml.h</code></p></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-cfg"><a href="#val-cfg" class="anchor"></a><code><span class="keyword">val</span> cfg : <a href="index.html#type-config">config</a></code></dt></dl><dl><dt class="spec exception" id="exception-Error"><a href="#exception-Error" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Error</span> <span class="keyword">of</span> string * string</code></dt></dl><dl><dt class="spec value" id="val-write"><a href="#val-write" class="anchor"></a><code><span class="keyword">val</span> write : <span>?&#8288;dir:string</span> <span>&#45;&gt;</span> <span>prefix:string</span> <span>&#45;&gt;</span> <a href="../Fsml/Fsm/index.html#type-t">Fsml.Fsm.t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>write prefix m</code> writes in files <code>prefix.h</code> and <code>prefix.c</code> a representation of FSM <code>m</code> as a C function. This function has prototype <code>void fsm_xxx(ctx_t *ctx)</code>, where <code>xxx</code> is <code>m.m_id</code> and <code>ctx_t</code> is the type of a structure recording the value of inputs and outputs of the machine. Each call to the <code>fsm_xxx</code> function will correspond to one execution step of the machine: it first looks for a fireable transition (depending on the values of the inputs read in the context <code>ctx</code> and of the local variables) and, if found, performs the action associated to this transition (updating the value of outputs and local variables) and updates the current state. The generated files are written in the current working directory unless a target directory is specified with the <code>dir</code> argument. If the target directory does not exist, an attempt is made to create it.</p></dd></dl></div></body></html>